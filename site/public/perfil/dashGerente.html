<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/css/estilos-gerais.css">
    <link rel="stylesheet" href="../assets/css/sidebar.css">
    <link rel="stylesheet" href="../assets/css/dashGerente.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js">
        import { Colors } from 'chart.js';
    </script>

    <title>Dashboard - Gerente</title>
</head>

<body>
    <section class="main">

        <!-- SIDE BAR -->
        <div class="sidebar">
            <div class="perfilNome">
                <img class="iconPerfilNome" src="../assets/img/usuario-de-perfil.png" alt="">
                <span id="spanNome" class="nomePerfil"></span>
            </div>
            <div class="perfilFranquia">
                <a class="ancora" href="franquia.html"><img class="iconPerfil" src="../assets/img/franquia.png"
                        alt=""></a>
            </div>
            <div class="perfilFuncionario">
                <a class="ancora" href="func.html"><img class="iconPerfil"
                        src="../assets/img/carteira-de-identidade.png" alt=""></a>
            </div>
            <div class="perfilDefinicoes">
                <a class="ancora" href="totem.html"><img class="iconPerfil" src="../assets/img/definicoes.png"
                        alt=""></a>
            </div>
            <div class="perfilGrafico">
                <a id="ancoraGrafico" class="ancora" href="dashGerente.html"><img class="iconPerfil dashboard"
                        src="../assets/img/grafico-preditivo.png" alt=""></a>
            </div>
            <button onclick="abrirChamado()" class="btnChamado">Abrir chamado</button>
            <button onclick="sairDashboard()" class="btnSair">Sair</button>
        </div>
        <!-- FIM DA SIDEBAR -->
        <div class="dash">
            <div class="inicio">
                <div class="titulo"> Dashboard - Gerente </div>
                <div class="img-mcdonalds">
                    <img src="../assets/img/mcdonalds.png" alt="Logo do Mc'Donalds">
                </div>
            </div>
            <div class="kpis">
                <!-- <div class="kpi"><span>Quantidade de totens Desativos</span>
                    <h5 class="kpitexto"></h5>
                        <h6 class="texto_kpi" id="kpiTxt">4</h6>
                </div> -->
                <div class="kpi"><span>Unidade com mais ocorrências de erro</span>
                    <!-- <h5 class="kpitexto"></h5> -->
                    <h6 class="texto_kpi" id="kpiTxt">Méqui 1000</h6>
                </div>
                <div class="kpi"><span>Tipo de erro mais comum</span>
                    <!-- <h5 class="kpitexto"></h5> -->
                   <h6 class="texto_kpi" id="kpiTxt">Disco</h6>
                </div>
                <div class="kpi"><span>mes com maior e menor numero de incidentes (grafico ou abstrair para kpi)</span>
                    <!-- <h5 class="kpitexto">Tempo médio desativado</h5>  -->
                  <h6 class="texto_kpi" id="kpiTxt">janeiro < junho</h6>
                </div>

            </div>
            <div class="graficos">

                <div class="div_chart1">
                    <div class="chart1">
                        <canvas class="canva" id="myChart1"></canvas>
                    </div>
                </div>

                <div class="div_chart01">
                    <div class="chart01">
                        <canvas id="myChart"></canvas>
                        <div class="kpi_dentro_chart"><span>Totens ativos</span>
                            <!-- <h5 class="kpitexto">Tempo médio desativado</h5>  -->
                          <h6 class="texto_kpi" id="kpiTxt">6 de 8</h6>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        </div>

</body>

</html>

<script>
     if(sessionStorage.CARGO == "suporte"){
        var ancora = document.getElementById("ancoraGrafico");
        ancora.href = "selecaoTotem.html";
    } else {
        var ancora = document.getElementById("ancoraGrafico");
        ancora.href = "dashGerente.html";
    }
    var nomes = sessionStorage.NOME_USUARIO;
    spanNome.innerHTML = nomes;

    function abrirChamado() {
  window.location.href = 'https://toodtech.auvo.com.br/Ticket/Novo'; 
}

    // Função para sair da Dashboard
    function sairDashboard() {
        window.location = "../index.html"
    }

    const ctx = document.getElementById('myChart');

    new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['Ativos', 'Inativos'],
            datasets: [{
                label: 'Totens',
                data: [8, 6],
                backgroundColor: ['#9ab3ff', '#ff6464'] ,
                borderWidth: 3
            }]
        },
    });

    const ctx1 = document.getElementById('myChart1');

    new Chart(ctx1, {
        type: 'bar',
        data: {
            labels: ['CPU', 'DISCO', 'RAM', 'REDE'],
            datasets: [{
                label: 'Erros mais comuns na semana',
                data: [4, 6, 5, 2],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>